
{% extends 'courses/course_detail.html' %}
{% block course_content %}
<h3 style="font-size:28px;font-weight:bold;margin-bottom:32px;text-align:center;color:#4a90e2;letter-spacing:2px;">课程人员</h3>
<div style="max-width:900px;margin:auto;background:#f8fafd;padding:32px 24px 24px 24px;border-radius:16px;box-shadow:0 2px 12px #eee;">
	<button id="toggle-teacher" style="background:#4a90e2;color:#fff;padding:6px 18px;border:none;border-radius:6px;font-weight:bold;margin-bottom:18px;cursor:pointer;">教师列表 ▼</button>
	<div id="teacher-list" style="margin-bottom:32px;display:block;">
		<span style="font-weight:bold;font-size:18px;color:#333;">教师：</span>
		<span style="font-size:18px;color:#4a90e2;">{{ teacher }}</span>
	</div>
	<button id="toggle-student" style="background:#4a90e2;color:#fff;padding:6px 18px;border:none;border-radius:6px;font-weight:bold;margin-bottom:18px;cursor:pointer;">学生列表 ▼</button>
	<div id="student-list" style="margin-bottom:32px;display:block;">
		<ul style="list-style:none;padding:0;margin:0;">
			{% for student in students %}
			<li style="margin-bottom:18px;padding:12px 18px;background:#fff;border-radius:8px;box-shadow:0 1px 4px #eee;display:flex;align-items:center;justify-content:space-between;">
				<div>
					<span style="font-size:17px;font-weight:bold;color:#333;">{{ student.name }}</span>
					<span style="color:#888;margin-left:16px;font-size:15px;">{{ student.student_id }}</span>
					<span style="color:#888;margin-left:16px;font-size:15px;">{{ student.college }}</span>
				</div>
				{% if user.is_superuser %}
				<form method="post" style="display:inline;">
					{% csrf_token %}
					<input type="hidden" name="del_student_id" value="{{ student.id }}">
					<button type="submit" style="margin-left:16px;padding:4px 16px;background:#e74c3c;color:#fff;border:none;border-radius:6px;cursor:pointer;font-weight:bold;">删除</button>
				</form>
				{% endif %}
			</li>
			{% empty %}
			<li style="color:#aaa;padding:12px 18px;">暂无学生</li>
			{% endfor %}
		</ul>
	</div>
	{% if user.is_superuser %}
	<div style="margin-top:40px;padding:24px 0 0 0;border-top:1px solid #eee;">
		<form method="post" style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
			{% csrf_token %}
			<span style="font-size:16px;font-weight:bold;">添加学生：</span>
			<select name="add_student_id" required style="padding:6px 12px;border-radius:6px;border:1px solid #ddd;font-size:16px;min-width:180px;">
				<option value="">请选择学生</option>
				{% for s in all_students %}
				<option value="{{ s.id }}">{{ s.name }}（{{ s.college }}）</option>
				{% endfor %}
			</select>
			<button type="submit" style="padding:6px 24px;background:#4a90e2;color:#fff;border:none;border-radius:6px;font-weight:bold;">添加</button>
		</form>
	</div>
	{% endif %}
</div>
<script>
	document.getElementById('toggle-teacher').onclick = function() {
		var list = document.getElementById('teacher-list');
		if (list.style.display === 'none') {
			list.style.display = 'block';
			this.innerText = '教师列表 ▼';
		} else {
			list.style.display = 'none';
			this.innerText = '教师列表 ▲';
		}
	};
	document.getElementById('toggle-student').onclick = function() {
		var list = document.getElementById('student-list');
		if (list.style.display === 'none') {
			list.style.display = 'block';
			this.innerText = '学生列表 ▼';
		} else {
			list.style.display = 'none';
			this.innerText = '学生列表 ▲';
		}
	};
</script>
{% endblock %}
