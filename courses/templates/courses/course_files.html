{% extends 'courses/course_detail.html' %}
{% block course_content %}
<h3 style="font-size:24px;color:#4a90e2;margin-bottom:24px;">课程文件</h3>
<div style="max-width:900px;margin:auto;background:#f8fafd;padding:32px 24px;border-radius:16px;box-shadow:0 2px 12px #eee;">
	{% if is_teacher %}
	<form method="post" enctype="multipart/form-data" style="margin-bottom:32px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
		{% csrf_token %}
		<input type="file" name="upload_file" required style="padding:6px 12px;border-radius:6px;border:1px solid #ddd;">
		<input type="text" name="file_name" placeholder="文件名（可选）" style="padding:6px 12px;border-radius:6px;border:1px solid #ddd;min-width:180px;">
		<button type="submit" class="btn" style="padding:6px 24px;">上传文件</button>
	</form>
	{% endif %}
	<ul style="list-style:none;padding:0;margin:0;">
		{% for file in files %}
		<li style="margin-bottom:18px;padding:12px 18px;background:#fff;border-radius:8px;box-shadow:0 1px 4px #eee;display:flex;align-items:center;justify-content:space-between;">
			<div>
				<a href="{{ file.file.url }}" target="_blank" style="font-size:17px;font-weight:bold;color:#357abd;text-decoration:underline;">{{ file.name }}</a>
				<span style="color:#888;margin-left:16px;font-size:15px;">上传时间：{{ file.uploaded_at|date:'Y-m-d H:i' }}</span>
			</div>
			{% if is_teacher %}
			<form method="post" style="display:inline;">
				{% csrf_token %}
				<input type="hidden" name="delete_file_id" value="{{ file.id }}">
				<button type="submit" class="btn-delete" style="margin-left:16px;">删除</button>
			</form>
			{% endif %}
		</li>
		{% empty %}
		<li style="color:#aaa;padding:12px 18px;">暂无文件</li>
		{% endfor %}
	</ul>
</div>
{% endblock %}
